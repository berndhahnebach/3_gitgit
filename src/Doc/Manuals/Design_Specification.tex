


%***********************************************
%************ Dokumentklasse *******************
%***********************************************
%\documentclass[makeidx,sumlimits,twoside,a4paper,12pt]{report}
\documentclass[makeidx,sumlimits,a4paper,12pt]{report}


%***********************************************
%************ Geladene Pakete  *****************
%***********************************************
\usepackage[ansinew]{inputenc}     	%% Ansi
\usepackage{color}	 	   	%% Farben
\usepackage{graphicx}		%% Grafikpaket
\usepackage{calc}		   	%% Calc-Paket
\usepackage{layout}			%% Layout-Paket
\usepackage[bf]{caption2}
\usepackage{times}
\usepackage[pdftex, pdfmark, dvips, ps2pdf]{thumbpdf}

%***********************************************
%************ Eigene Befehle *******************
%***********************************************
\graphicspath{{pics/}{.}}	   			%% relative Pfadangabe für Grafiken und Bilder




%************ Textbox ***************************
\newcommand{\flexXYbox}[4]{\fbox{\rule[#1 cm]{0cm}{#2 cm}\makebox[#3 cm]{#4}}}


%***********************************************
%************* Grundeinstellungen **************
%***********************************************
\parindent0cm
\sloppy
\nonfrenchspacing
\makeindex				% tell \index to actually write the .idx file
\linespread{1.3}
	

%***********************************************
%************ Anfang des Dokumentes ************
%***********************************************
\begin{document}


%***********************************************
\pagenumbering{Roman}



%Inhaltsverzeichnis
\tableofcontents
\newpage
\pagenumbering{arabic}


%***********************************************
%Kapitel 1: Einleitung
\chapter{Introduction}

With the release of Open CasCade in 2000 the opportunity was given to use 
this gift to plan an implement the first fully featured free 3D CAD system 
for mechanical engineering. For me was the point my experience on the CasCade 
Kernel. Without experience in profession work one would have great trouble to 
get into the concepts and algorithms of the CasCade Kernel as a whole. So my 
plan is to provide a framework which utilize the important packages of the 
CasCade Kernel (topology, Visualization, OCAF, I/O) and make it possible for 
people to provide functionality at here own level of skills. Anyway, to program 
a application with the size and the function richness of a CAD package on 
your own is perfectly impossible.

Also for me it's a interesting thing, since I'm involved in programming a CasCade
 application (in the field of reverse engineering) at DaimlerChrysler, to use the 
 lessons I've learned  and introduce them in a completely new design.

Jürgen Riegel 2000


%***********************************************
%Kapitel 2: Grundlagen
\chapter{Specification}

The Specification gives you an overview what we try to achieve. 
What kind of functions and features FreeCAD shut have.

\section{Overview}
FreeCAD will be a general purpose 3D CAD modeller. The development 
will be completely as Open Source. As all 3D modellers it will have 
a 2D component to extract design drawings from the 3D model, but 2D 
(like AutoCAD) is not the focus. Also animation and organic shapes 
(Maya, 3D StudioMAX, Cinema 4D) is not the focus. FreeCAD will aim 
directly to mechanical engineering, product design and related 
features (like CatiaV4 and V5,  and SolidWorks).

There for a list of Features such a CAD modeller shut have:
\begin{itemize}
\item Part Design
Functions for full parametric Solid Modelling like fuse, cut, chamfers, fillets, holes, slots and rips
\item Surface Design
Functions for Surface Modelling like extrudes, blends, trimming, lofts and filling surfaces
\item Sketcher
Constructing points, lines, arcs and free form curves on base of a plane (2D) with the ability to define constrains between them like dimensions, parallelism, coincidence, and so on…
\item Assembly Design
Functions to assemble parts, designed in Surface Design or Part Design, together to Assemblies. Its also possible to define constrains between the Parts like axes, contact, and so on. Also functions to test intersections and movements (inverse cinematic) 
\item 2D Drawing
Extracting 2D drawings from the 3D models for printing and ploting
\end{itemize}


Additional features can be
\begin{itemize}
\item Rendering support
I/O support for RIB format for geometry and Shader, used by renderer like BMRT 
\item Part Database
For storing and retrieving standard designs using a catalog functionality with previewing sharing in work groups.
\item FE Pre- and Postprocessor
for meshing, defining constraints and viewing results. Transparent usage of a freely available FE simulation package (modal and stress analyses)
\item Special workbenches for:
Sheet metal design, moulding and casting tools  
\item And a whole lot more
\end{itemize}


Besides the functional features the ease of use of a application is very important, 
there for the specification goes also for that and defines some cornerstones for 
the user interaction:
\begin{itemize}
\item Workbenches
Its to much to show all the functions at once to the user. Its much better to packaging function needed for certain tasks together. That's a Workbench. The appearance of a Workbench consist of the Toolbar and menu layout as well as the visual mode of the project tree view. So the switching of the Workbench can nearly change the complete appearance of the application.
\item Guided selection
In CAD programs its very important to know what to select in a function. There shut always be a guidance for the user and a clear response on wrong selection. This is first a clear dialog box layout which shows clearly what to select.
\item Enough online Help ;-) 
That includes detailed descriptions on workbenches and functions as well as tutorials on best practice scenarios.
\end{itemize}

Also some important points for the usability of the application itself:
\begin{itemize}
\item Familiar lockout
No fancy "skins" and experimental controls no animations, just a plain and simple MDI frame and all the menus at the familiar place
\item Customisation
There shut be a rich set of customisation mechanisms to allow the user to change the standard behaviour the way he wish. That can be:
o A easy to use macro recording facility
o Implementation of parts of the application logic in a script language to allow the user to change it
o Allow extensions implementation in a script language 
\item Modularity
The program must be one big block. Function and Workbenches shut be loaded dynamically only when needed
\end{itemize}

\section{Framework}
\subsection{Overview}
You can see FreeCAD as an Application but that's only the half of the truth. 
The executable itself has basically no modeling function. It is more or less 
only a basic framework to allow application modules to register and offer 
functions to the user. So the FreeCAD executable is best named as a "framework" 
for embedding the functions.
 

%***********************************************

\chapter{Design}

In opposite to the Specification the Design gives you a discription 
of the system from a programmers point of view. Here we got the description 
of the Packages and the key concepts of the Program. For that purpose 
also the UML is used.

\section{Overview}

The Application FreeCAD consists basically off following Packages:

As you see there are five bigger blocks:
\begin{itemize}
\item Third party libraries 
\item  Console application
\item  Interactive application
\item  Additional data types and functions
\item  Additional application logic
\end{itemize}

Each block has his special function and use normally the functions on 
the blocks below. In the following section the main functions of 
the blocks and packages are described.

\subsection{Third party libraries}

This are libraries which are not changed in the FreeCAD project. 
They are basically used unchanged as a dynamic link library (*.so or *.dll). 
If there is a change necessary or a wrapper class is needed, then the code of 
the wrapper or the changed library code have to be moved to the FreeCAD base package.

The used libraries are:

\subsubsection{Python}

Python is the primary scripting language and is used in the whole application.

For example:
\begin{itemize}
\item  Implement test scripts for testing on:
\begin{itemize}
\item  memory leaks
\item  ensure presents of functionality after changes
\item  post build checks
\item  test coverage tests
\end{itemize}
\item  Macros and macro recording
\item  Implement application logic for standard packages
\item  Implementation of whole workbenches
\item  Dynamic loading of packages
\item  Implementing rules for design (Knowledge engineering) 
\item  Doing some fancy Internet stuff like work groups and PDM
\item  And so on ...
\end{itemize}

Especially the dynamic package loading of python is used to load at run time additional functionality and workbenches needed for the actual tasks.
For a closer look to python see: www.python.org 
Why Python you may ask. There are some reasons:
So far I used different scripting languages in my professional life:
\begin{itemize}
\item  Perl
\item  Tcl/Tk
\item  VB
\item  Java
\end{itemize}

Python is more OO then Perl and Tcl, the code is not a mess like in Perl and VB. 
Java isn't a script language and way to over hyped. Python is well documented and 
easy to embed and extend. It is also well tested and has a strong back hold in the 
open source community. 

\subsubsection{OCC (Open CasCade)}

OCC is a full featured CAD Kernel. Its originally developed by Matra Datavision in 
France for the Strim (Styler) and Euclid Quantum applications and later on made Open 
Source. It's a really huge library and makes a free CAD application possible in the 
first place, by providing some packages which would be hard or impossible to implement 
in a Open Source project:
\begin{itemize}
\item  A complete STEP compliant geometry kernel
\item  A topological data model and all needed functions to work on (cut, fuse, extrude, and so on…)
\item  Standard Import- / Export processors like STEP, IGES, VRML
\item  3D and 2D Viewer with selection support
\item  A Document and Project data structure with support for save and restore, external linking of documents, recalculation of design history (parametric modelling) and a facility to load new data types as a extension package dynamically
\end{itemize}

To learn more about Open CasCade take a look at http://www.opencascade.org.   

\subsubsection{QT (2.x +)}

I don't think I need to tell a lot about QT. Its one of the most often 
used GUI toolkits in Open Source projects. For me the most important point 
to use QT is the QT Designer and the possibility to load whole dialog boxes 
as a (XML) resource and incorporate specialized widgets. In a CAX application 
the user interaction and dialog boxes a by far the biggest part of the code 
and a good dialog designer is very important to easily extend FreeCAD with new 
functionality.

Further information and a very good online documentation you'll find on www.troll.no.

\subsection{Console application}

This is a executable which incorporates two important packages:
\begin{itemize}
\item  FreeCAD Base
\item  FreeCAD Document
\end{itemize}
The console application is mainly for automated testing purpose, but can also be used for server services. The packages used in this application are completely GUI independent. The executable runs without a X-Server and is able to load additional function (trough python packages) and additional data types (trough OCC plugins)

\subsection{Interactive application}

One package more on top of the Console Application makes the Interactive Application.
\begin{itemize}
\item  FreeCAD Gui
\end{itemize}
This package brings the 3D and 2D Views, interactive selection, a tree view on the 
document and the framework to load workbenches. The Interactive application includes 
no modelling function, only helper function and the basic views.


\subsection{Additional functions and data types}
\subsection{Additional Applikation logic}



%***********************************************
%************ Ende des Dokumentes **************
%***********************************************
\end{document}
